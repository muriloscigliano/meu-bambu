---
import Button from '../Button.astro';
import Icon from '../Icon.astro';

interface Props {
	title: string;
	price: string;
	description: string;
	features: string[];
	ctaLabel: string;
	ctaHref: string;
}

const { title, price, description, features, ctaLabel, ctaHref } = Astro.props as Props;
---

<section class="product-sheets" data-section aria-labelledby="product-sheets-title">
	<div class="product-sheets__container">
		<figure class="product-sheets__media">
			<div class="product-sheets__image-wrap" data-animate="image-reveal">
				<img src="/images/floresta-bambu.jpg" alt="Lâminas de bambu flexíveis para móveis e marcenaria - Meu Bambu" loading="lazy" />
			</div>
		</figure>

		<article class="product-sheets__details">
			<header>
				<h2 id="product-sheets-title" class="product-sheets__title" data-split="heading">{title}</h2>
				<p class="product-sheets__price" data-split="heading">{price}</p>
			</header>
			<p class="product-sheets__desc" data-animate="fade-in">{description}</p>

			<ul class="product-sheets__bullets" data-animate="stagger" aria-label="Características do produto">
				{features.map((feature) => (
					<li data-stagger-item>
						<Icon name="checkmark" size={18} class="checkmark-icon" aria-hidden="true" />
						<span>{feature}</span>
					</li>
				))}
			</ul>

			<div class="product-sheets__options" data-animate="stagger">
				<div class="product-sheets__divider" role="separator" data-stagger-item></div>
				<div class="product-sheets__option-row" data-stagger-item>
					<fieldset class="product-sheets__option-group">
						<legend class="product-sheets__option-label">Espessura</legend>
						<div class="product-sheets__chips" role="radiogroup" aria-label="Selecione a espessura">
							<button type="button" class="chip-option" role="radio" aria-checked="true" data-value="0.6mm">0.6mm</button>
						</div>
					</fieldset>
					<div class="product-sheets__row-divider" role="separator" aria-hidden="true"></div>
					<fieldset class="product-sheets__option-group">
						<legend class="product-sheets__option-label">Tamanho</legend>
						<div class="product-sheets__chips" role="radiogroup" aria-label="Selecione o tamanho">
							<button type="button" class="chip-option chip-option--size" role="radio" aria-checked="true" data-value="200x60cm">200x60cm</button>
						</div>
					</fieldset>
				</div>
				<div class="product-sheets__divider" role="separator" data-stagger-item></div>
			</div>

			<div data-animate="fade-in">
				<Button text={ctaLabel} href={ctaHref} theme="dark" />
			</div>
		</article>
	</div>

	<script is:inline>
		(function() {
			const sheetsRoot = document.currentScript?.closest('.product-sheets');
			if (!sheetsRoot) return;
			sheetsRoot.addEventListener('click', (e) => {
				const target = e.target;
				if (!(target instanceof HTMLElement)) return;
				const btn = target.closest('button.chip-option');
				if (!btn) return;
				const group = btn.closest('[role="radiogroup"]');
				if (!group) return;
				group.querySelectorAll('button.chip-option').forEach((b) => b.setAttribute('aria-checked', 'false'));
				btn.setAttribute('aria-checked', 'true');
			});
		})();
	</script>
</section>

<style>
.product-sheets { 
	position: relative; 
	isolation: isolate; 
	min-height: var(--section-min-height);
	display: flex;
	align-items: center;
	background: var(--color-bg-secondary);
	border-top: 1px solid var(--color-line);
	border-bottom: 1px solid var(--color-line);
	padding-block: 90px;
}

.product-sheets__container { 
	max-width: var(--container-max); 
	margin-inline: auto; 
	display: grid; 
	gap: 48px; 
	align-items: center; 
	grid-template-columns: 1fr 1fr;
	padding-inline: 2.25rem;
}

.product-sheets__details { 
	display: flex;
	flex-direction: column;
	gap: 28px;
	padding: 48px;
}

.product-sheets__title { 
	font-family: var(--font-display); 
	font-weight: 900;
	text-transform: uppercase; 
	line-height: 0.9;
	font-size: 64px;
	color: var(--color-text-secondary);
	margin: 0;
}

.product-sheets__price {
	font-family: var(--font-display); 
	font-weight: 900;
	text-transform: uppercase; 
	line-height: 0.9;
	font-size: 36px;
	color: var(--color-text-secondary);
	margin: 0;
}

.product-sheets__desc { 
	font-family: var(--font-sans);
	font-weight: 500;
	font-size: 16px;
	line-height: 1.3;
	color: var(--color-text-primary);
	margin: 0;
	max-width: 52ch;
}

.product-sheets__bullets {
	list-style: none;
	padding: 0;
	margin: 0;
	display: flex;
	flex-direction: column;
	gap: 12px;
}

.product-sheets__bullets li {
	display: flex;
	align-items: center;
	gap: 6px;
	font-family: var(--font-sans);
	font-weight: 500;
	font-size: 16px;
	line-height: 1.1;
	color: var(--color-text-primary);
}

.product-sheets__options {
	display: flex;
	flex-direction: column;
	gap: 24px;
}

.product-sheets__option-row {
	display: flex;
	gap: 24px;
	align-items: flex-start;
}

.product-sheets__row-divider {
	width: 34px;
	height: 0;
	border-top: 1px solid var(--color-border-dark);
	align-self: center;
	transform: rotate(90deg);
}

.product-sheets__divider {
	height: 1px;
	width: 100%;
	background: var(--color-border-dark);
}

.product-sheets__option-group {
	display: flex;
	gap: 12px;
	align-items: center;
	border: none;
	padding: 0;
	margin: 0;
}

.product-sheets__option-label {
	font-family: var(--font-sans);
	font-weight: 700;
	font-size: 16px;
	color: var(--color-text-dark);
	margin: 0;
	white-space: nowrap;
}

.product-sheets__chips {
	display: flex;
	gap: 8px;
	flex-wrap: wrap;
}

.chip-option--size {
	min-width: 100px;
}

.product-sheets__cta {
	align-self: flex-start;
	height: 56px;
}

.product-sheets__media {
	position: relative;
	display: flex;
	align-items: center;
	justify-content: center;
}

.product-sheets__image-wrap {
	max-width: 728px;
	width: 100%;
}

.product-sheets__image-wrap img { 
	width: 100%; 
	height: auto;
	display: block;
}

@media (max-width: 1024px) {
	.product-sheets__container {
		grid-template-columns: 1fr;
	}
	
	.product-sheets__details {
		padding: 24px;
	}
	
	.product-sheets__option-row {
		flex-direction: column;
	}
	
	.product-sheets__row-divider {
		display: none;
	}
}

@media (max-width: 768px) {
	.product-sheets__title {
		font-size: 48px;
	}
	
	.product-sheets__price {
		font-size: 28px;
	}
}
</style>
